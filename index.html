<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Controller</title>
</head>
<style>
    body {
    text-align: center;
    font-family: sans-serif;
    }

    button {
    text-align: center;
    text-decoration: none;
    display: inline-block;
    font-size: 2rem;
    width: 40%;
    padding: 1rem;
    margin: 1rem;
  }

  form {
    display: inline-block;
    font-size: 1.5rem;
    height: 2rem;
    padding: 0.5rem;
    margin: 0.5rem;
  }

  #ip {
      width:10rem;
  }

  #submit-ip {
      width: 5rem;
  }

  input {
      height: 2rem;
  }

</style>
<body>
    <div>
        <form action="">
            <label>IP Address: </label>
            <input type="text" id="ip" name="IP Address" value="192.168.43.221">
            <input type="submit" id="submit-ip" value="Submit">
        </form> 
    </div>

    <div>
        <button onclick="status()">Status</button>
    </div>

    <div>
        <button style="color:red" onclick="onRed()">On Red</button> 
        <button onclick="offRed()">Off Red</button> 
    </div>
  
    <div>
        <button style="color:green" onclick="onGreen()">On Green</button> 
        <button onclick="offGreen()">Off Green</button> 
    </div> 
    
    <div>
        <button style="color:blue" onclick="onBlue()">On Blue</button> 
        <button onclick="offBlue()">Off Blue</button> 
    </div>

</body>

<script>

var ipInput = document.getElementById("ip");
var ipAddress = ipInput.value;

window.onload = function() {
    if (sessionStorage.getItem("autosave")) {
        ipInput.value = sessionStorage.getItem("autosave");
        updateIpAddress();
    }
}

ipInput.addEventListener("keyup", function() {
    sessionStorage.setItem("autosave", ipInput.value);
});

function updateIpAddress() {
    ipAddress = ipInput.value;
}

function onRed() {
    fetch('http://' + ipAddress + '/onRed')
}

function offRed() {
    fetch('http://' + ipAddress + '/offRed')
}

function onGreen() {
    fetch('http://' + ipAddress + '/onGreen')
}

function offGreen() {
    fetch('http://' + ipAddress + '/offGreen')
}

function onBlue() {
    fetch('http://' + ipAddress + '/onBlue')
}

function offBlue() {
    fetch('http://' + ipAddress + '/offBlue')
}

function status() {
    fetch('http://' + ipAddress + '/status')
}

</script>
</html>
